import{u as Y,a as K}from"./index-BinEl3po.js";import{h as H,l as t,O as S,P as i,j as r,k as C,H as x,Z as ee,a as F,d as U,c as oe,M as c,X as b,J as v,F as u,aa as w,u as l,z as se,S as te,$ as M,Q as Z}from"./vue-DwQkaS4S.js";import{u as k,k as ne,j as le,l as ae,m as re,n as ie,o as ge,p as j,q as de,r as ce,t as fe,v as ue,w as pe}from"./element-B2K_PfVG.js";import{_ as he}from"./plugin-vueexport-helper-DlAUqK2U.js";const me=["xlink:href","fill"],_e=H({__name:"index",props:{width:{default:""},height:{default:""},color:{default:"#333"},prefix:{default:"#icon-"},is:{default:"el-icon"},name:{default:""},inStyle:{}},setup(L){return(d,O)=>(t(),S(ee(d.is),null,{default:i(()=>[(t(),r("svg",x({xmlns:"http://www.w3.org/2000/svg",style:{width:d.width,height:d.height,...d.inStyle},"aria-hidden":"true"},d.$attrs),[C("use",{"xlink:href":d.prefix+d.name,fill:d.color},null,8,me)],16))]),_:1}))}}),ye={class:"song-content"},be={class:"logo-cn"},ve={key:0,wrap:"",class:"singer-item"},we={class:"singer"},Ce={key:1,id:"default-song"},$e={class:"song-border"},Se={class:"song-border"},G=34,ze=H({__name:"index",props:{vup:{},avater:{default:""},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"},songs:{default:()=>[]},theme:{default:""},tab:{type:Boolean,default:!0},specSongs:{default:()=>[]}},setup(L){const d=L,O=F("---"),{copy:I,isSupported:J}=Y({source:O}),p=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],P=e=>ie([33.5+12.5*ge([e<4?4:e,12]),80]),m=(e,n,f)=>(j((e+1)/E(n,f))-1)%p.length,E=(e=[],n)=>j(Q(e)/de(A.value/P(n))),B=e=>{let n=e.length;const f=e.match(/[a-zA-Z]/g);return f&&(n=e.length-f.length+j(f.length/2)),n},Q=e=>e.filter(n=>B(n.song)>11).length+e.length,_={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}};let g={},N={},q=[];U(()=>[d.songs,d.specSongs],([e,n],f)=>{if(e.length){const z=e.filter(o=>o.type.includes(1)),y=e.filter(o=>o.type.includes(0)),h={};h.song_other=k(y,"song").filter(o=>B(o.song)>5).sort((o,s)=>o.song.localeCompare(s.song,"pinyin")),h.song_eng=k(z,"song").sort((o,s)=>o.song.localeCompare(s.song));for(let o=1;o<=5;o++)h[`song_${o}`]=k(y,"song").filter(s=>B(s.song)===o).sort((s,a)=>s.song.localeCompare(a.song,"pinyin"));if(n.length){const o=k(n,"song").sort((s,a)=>s.song.localeCompare(a.song));h.song_spec=o}const $=ne(e,o=>o.singer);g=h,N=$,q=[...Object.keys($).filter(o=>!!o).sort((o,s)=>o.localeCompare(s,"pinyin",{sensitivity:"accent"})),""]}},{immediate:!0,deep:!0});const A=F(window.innerWidth),{width:R}=K(),D=()=>{const e=document.getElementsByClassName("song-main")[0];e&&(A.value=e.offsetWidth)},V=e=>{J&&(I(`点歌 ${e.song}`),ce({message:`点歌 ${e.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},T=F("song");return U(()=>R.value,D),oe(()=>{D()}),(e,n)=>{const f=le,z=ae,y=fe,h=re,$=ue,W=pe;return t(),r("div",ye,[c(f,{class:"slogan",style:v({"--slogan":`url(${e.slogan})`})},{default:i(()=>[C("div",{class:"logo",style:v({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},b(e.vup),5),C("div",null,[C("div",be,b(e.logoCn),1),n[1]||(n[1]=C("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),c(_e,{name:e.avater,width:"70",height:"70",is:"v-fragment","in-style":{top:"100px",position:"absolute"}},null,8,["name"])]),_:1},8,["style"]),e.tab?(t(),S(h,{key:0,modelValue:l(T),"onUpdate:modelValue":n[0]||(n[0]=o=>se(T)?T.value=o:null),class:"song-tabs"},{default:i(()=>[c(z,{label:"按歌名",name:"song"}),c(z,{label:"按歌手",name:"singer"},{default:i(()=>[(t(!0),r(u,null,w(l(q),o=>(t(),r(u,null,[l(N)[o]?(t(),r("div",ve,[C("span",we,b(o)+": ",1),(t(!0),r(u,null,w(l(N)[o].sort((s,a)=>s.song.localeCompare(a.song,"pinyin",{sensitivity:"accent"})),s=>(t(),S(y,{class:"song-item","disable-transitions":"",onClick:a=>V(s)},{default:i(()=>[M(b(s.song),1)]),_:2},1032,["onClick"]))),256))])):Z("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue"])):(t(),r("div",Ce)),(t(),S(te,{to:e.tab?"#pane-song":"#default-song",defer:""},[(t(),r(u,null,w(5,o=>c(f,{class:"song-list"},{default:i(()=>[c(W,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[3,0],style:v({height:E(l(g)[`song_${o}`],o)*G/16+"rem"})},{default:i(()=>[(t(!0),r(u,null,w(l(g)[`song_${o}`],(s,a)=>(t(),r("div",$e,[c($,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?_[s.tag].label:"",color:(s.tag&&_[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&_[s.tag].color||"#a2d3ff",fontSize:"9px",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(y,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:p[m(a,l(g)[`song_${o}`],o)]||"#a2d3ff")+"11",onClick:X=>V(s),style:v({"border-left":`5px ${(e.theme?e.theme:p[m(a,l(g)[`song_${o}`],o)]||"#a2d3ff")+"44"} solid`,color:e.theme?e.theme:p[m(a,l(g)[`song_${o}`],o)]||"#a2d3ff"})},{default:i(()=>[M(b(s.song),1)]),_:2},1032,["color","onClick","style"])]),_:2},1032,["hidden","value","color","badge-style"])]))),256))]),_:2},1032,["style"])]),_:2},1024)),64)),(t(),r(u,null,w(["other","spec","eng"],o=>(t(),r(u,null,[l(g)[`song_${o}`]?(t(),S(f,{key:0,class:"song-list"},{default:i(()=>[c(W,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[3,0],style:v({height:(E(l(g)[`song_${o}`],11)*G+34/2)/16+"rem"})},{default:i(()=>[(t(!0),r(u,null,w(l(g)[`song_${o}`],(s,a)=>(t(),r("div",Se,[c($,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?_[s.tag].label:"",color:(s.tag&&_[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&_[s.tag].color||"#a2d3ff",fontSize:"9px",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(y,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:p[m(a,l(g)[`song_${o}`],11)]||"#a2d3ff")+"11",style:v({"border-left":`5px ${(e.theme?e.theme:p[m(a,l(g)[`song_${o}`],11)]||"#a2d3ff")+"44"} solid`,"max-width":P(11)/16+"rem",color:e.theme?e.theme:p[m(a,l(g)[`song_${o}`],11)]||"#a2d3ff"}),onClick:X=>V(s)},{default:i(()=>[M(b(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style"])]))),256))]),_:2},1032,["style"])]),_:2},1024)):Z("",!0)],64))),64))],8,["to"]))])}}}),Ve=he(ze,[["__scopeId","data-v-dc3c167e"]]);export{Ve as _};
