import{u as x,a as ee}from"./index-DZQwqLh7.js";import{_ as oe}from"./index.vuevuetypescriptsetuptruelang-CMndMGle.js";import{l as V,q as se,r as te,u as T,t as ne,m as ae,k as le,v as re,n as ge,w as ie,o as ce,p as de}from"./element-B-RnhDZx.js";import{h as ue,a as w,d as H,c as fe,l as a,j as r,M as c,P as i,k as E,X as $,J as u,H as me,O as W,F as f,a5 as z,u as t,$ as L,Q as I,z as pe,S as he}from"./vue-CAKOtfO9.js";import{_ as ye}from"./plugin-vueexport-helper-DlAUqK2U.js";const _e={class:"song-content"},ve={class:"logo-cn"},be={key:0,wrap:"",class:"singer-item"},Ce={class:"singer"},we={key:1,id:"default-song"},y=9,$e=ue({__name:"index",props:{vup:{},avater:{default:()=>({})},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"},songs:{default:()=>[]},theme:{default:""},tab:{type:Boolean,default:!0},specSongs:{default:()=>[]}},setup(J){const R=J,Q=w("---"),{copy:X,isSupported:Y}=x({source:Q}),m=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],p=w(16),_=w(36.09),U=w(16.09),k=e=>(32+14.53*se([e<4?3.5:e,12]))/16*p.value,v=(e,n,d)=>(V((e+1)/F(n,d))-1)%m.length,F=(e=[],n)=>V(e.length/te(D.value/k(n))),M=e=>{let n=e.length;const d=e.match(/[a-z]/g);return d&&(n=e.length-d.length+V(d.length/2)),n},b={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}};let g={},P={},A=[];const B=e=>e.map(n=>({...n,row:M(n.song)>y?2:1}));H(()=>[R.songs,R.specSongs],([e,n],d)=>{if(e.length){const N=e.filter(o=>o.type.includes(1)),C=e.filter(o=>o.type.includes(0)),h={};h.song_other=B(T(C,"song").filter(o=>M(o.song)>5).sort((o,s)=>o.song.localeCompare(s.song,"pinyin"))),h.song_eng=B(T(N,"song").sort((o,s)=>o.song.localeCompare(s.song)));for(let o=1;o<=5;o++)h[`song_${o}`]=B(T(C,"song").filter(s=>M(s.song)===o).sort((s,l)=>s.song.localeCompare(l.song,"pinyin")));if(n.length){const o=T(n,"song").sort((s,l)=>s.song.localeCompare(l.song));h.song_spec=B(o)}const S=ne(e,o=>o.singer);g=h,P=S,A=[...Object.keys(S).filter(o=>!!o).sort((o,s)=>o.localeCompare(s,"pinyin",{sensitivity:"accent"})),""]}},{immediate:!0,deep:!0});const D=w(window.innerWidth),{width:K}=ee(),G=()=>{const e=document.getElementsByClassName("song-main")[0];e&&(D.value=e.offsetWidth)},O=e=>{Y&&(X(`点歌 ${e.song}`),ae({message:`点歌 ${e.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},j=w("song");return H(()=>K.value,G),fe(()=>{G(),p.value=+getComputedStyle(document.documentElement).getPropertyValue("font-size").replace("px",""),_.value=_.value/16*p.value,U.value=U.value/16*p.value}),(e,n)=>{const d=le,N=re,C=ge,h=ie,S=ce,q=de;return a(),r("div",_e,[c(d,{class:"slogan",style:u({"--slogan":`url(${e.slogan})`})},{default:i(()=>[E("div",{class:"logo",style:u({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},$(e.vup),5),E("div",null,[E("div",ve,$(e.logoCn),1),n[1]||(n[1]=E("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),c(oe,me({name:e.avater.name||"",img:e.avater.img,src:e.avater.src||"",width:"4.375rem",height:"4.375rem",is:e.avater.is||"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},e.avater.$attr||{}),null,16,["name","img","src","is"])]),_:1},8,["style"]),e.tab?(a(),W(h,{key:0,modelValue:t(j),"onUpdate:modelValue":n[0]||(n[0]=o=>pe(j)?j.value=o:null),class:"song-tabs"},{default:i(()=>[c(N,{label:"按歌名",name:"song"}),c(N,{label:"按歌手",name:"singer"},{default:i(()=>[(a(!0),r(f,null,z(t(A),o=>(a(),r(f,null,[t(P)[o]?(a(),r("div",be,[E("span",Ce,$(o)+": ",1),(a(!0),r(f,null,z(t(P)[o].sort((s,l)=>s.song.localeCompare(l.song,"pinyin",{sensitivity:"accent"})),s=>(a(),W(C,{class:"song-item","disable-transitions":"",onClick:l=>O(s)},{default:i(()=>[L($(s.song),1)]),_:2},1032,["onClick"]))),256))])):I("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue"])):(a(),r("div",we)),(a(),W(he,{to:e.tab?"#pane-song":"#default-song",defer:""},[(a(),r(f,null,z(5,o=>c(d,{class:"song-list"},{default:i(()=>[c(q,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:u({height:t(V)(F(t(g)[`song_${o}`],o)*t(_)/t(p))+"rem"})},{default:i(()=>[(a(!0),r(f,null,z(t(g)[`song_${o}`],(s,l)=>(a(),r("div",{class:"song-border",style:u({width:k(o)+"px",height:t(_)+"px"})},[c(S,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?b[s.tag].label:"",color:(s.tag&&b[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&b[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:m[v(l,t(g)[`song_${o}`],o)]||"#a2d3ff")+"11",onClick:Z=>O(s),style:u({"border-left":`.3125rem ${(e.theme?e.theme:m[v(l,t(g)[`song_${o}`],o)]||"#a2d3ff")+"44"} solid`,color:e.theme?e.theme:m[v(l,t(g)[`song_${o}`],o)]||"#a2d3ff",fontSize:s.row==2?"0.53rem":"0.875rem"})},{default:i(()=>[L($(s.song),1)]),_:2},1032,["color","onClick","style"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)),64)),(a(),r(f,null,z(["other","spec","eng"],o=>(a(),r(f,null,[t(g)[`song_${o}`]?(a(),W(d,{key:0,class:"song-list"},{default:i(()=>[c(q,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:u({height:F(t(g)[`song_${o}`],y)*t(_)/t(p)+"rem"})},{default:i(()=>[(a(!0),r(f,null,z(t(g)[`song_${o}`],(s,l)=>(a(),r("div",{class:"song-border",style:u({width:k(y)+"px",height:t(_)+"px"})},[c(S,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?b[s.tag].label:"",color:(s.tag&&b[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&b[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:m[v(l,t(g)[`song_${o}`],y)]||"#a2d3ff")+"11",style:u({"border-left":`.3125rem ${(e.theme?e.theme:m[v(l,t(g)[`song_${o}`],y)]||"#a2d3ff")+"44"} solid`,"max-width":k(y)/t(p)+"rem",color:e.theme?e.theme:m[v(l,t(g)[`song_${o}`],y)]||"#a2d3ff",fontSize:s.row==2?"0.66rem":"0.875rem"}),onClick:Z=>O(s)},{default:i(()=>[L($(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)):I("",!0)],64))),64))],8,["to"]))])}}}),Ne=ye($e,[["__scopeId","data-v-3122426d"]]);export{Ne as _};
