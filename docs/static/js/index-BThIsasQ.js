import{u as ae,a as re}from"./index-Cgdqt2QU.js";import{k as ie,u as L,l as ge,j as de,m as ce,n as ue,o as b,p as fe,q as U,r as me,t as he,v as pe,w as ye}from"./element-B5WS0eiH.js";import{h as x,l,O as E,J as m,P as g,j as i,k,H as ee,Z as ve,a as $,d as Z,c as _e,M as u,X as S,F as y,a5 as z,u as n,z as be,S as we,$ as A,Q as K}from"./vue-DwVGnbwD.js";import{_ as Ce}from"./plugin-vueexport-helper-DlAUqK2U.js";const $e=["xlink:href","fill"],Se=x({__name:"index",props:{width:{default:""},height:{default:""},color:{default:"#333"},prefix:{default:"#icon-"},is:{default:"el-icon"},name:{default:""},inStyle:{},img:{type:Boolean,default:!1},src:{default:"/kuromia.png"}},setup(G){return(a,H)=>{const M=ie;return a.img?(l(),E(M,{key:0,style:m({width:a.width,height:a.height,...a.inStyle}),src:a.src,fit:"fill"},null,8,["style","src"])):(l(),E(ve(a.is),{key:1},{default:g(()=>[(l(),i("svg",ee({xmlns:"http://www.w3.org/2000/svg",style:{width:a.width,height:a.height,...a.inStyle},"aria-hidden":"true"},a.$attrs),[k("use",{"xlink:href":a.prefix+a.name,fill:a.color},null,8,$e)],16))]),_:1}))}}}),ze={class:"song-content"},ke={class:"logo-cn"},Ee={key:0,wrap:"",class:"singer-item"},Be={class:"singer"},Ne={key:1,id:"default-song"},f=9,Ve=x({__name:"index",props:{vup:{},avater:{default:()=>({})},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"},songs:{default:()=>[]},theme:{default:""},tab:{type:Boolean,default:!0},specSongs:{default:()=>[]}},setup(G){const a=G,H=$("---"),{copy:M,isSupported:oe}=ae({source:H}),h=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],v=$(16),p=$(36.09),T=$(16.09),B=e=>(32+14.53*fe([e<4?3.5:e,12]))/16*v.value,P=(e,t,c)=>(b((e+1)/J(t,c))-1)%h.length,j=(e,t,c)=>(b((e+1)/Q(t,c))-1)%h.length,J=(e=[],t)=>b(se(e)/U(q.value/B(t))),Q=(e=[],t)=>b(te(e)/U(q.value/B(t))),N=e=>{let t=e.length;const c=e.match(/[a-z]/g);return c&&(t=e.length-c.length+b(c.length/2)),t},se=e=>b(e.filter(t=>N(t.song)>f).length*T.value/p.value)+e.length,te=e=>U(e.filter(t=>N(t.song)>f).length*T.value/p.value)+e.length,w={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}};let d={},O={},X=[];const W=e=>e.map(t=>({...t,row:N(t.song)>f?2:1}));Z(()=>[a.songs,a.specSongs],([e,t],c)=>{if(e.length){const F=e.filter(o=>o.type.includes(1)),C=e.filter(o=>o.type.includes(0)),_={};_.song_other=W(L(C,"song").filter(o=>N(o.song)>5).sort((o,s)=>o.song.localeCompare(s.song,"pinyin"))),_.song_eng=W(L(F,"song").sort((o,s)=>o.song.localeCompare(s.song)));for(let o=1;o<=5;o++)_[`song_${o}`]=W(L(C,"song").filter(s=>N(s.song)===o).sort((s,r)=>s.song.localeCompare(r.song,"pinyin")));if(t.length){const o=L(t,"song").sort((s,r)=>s.song.localeCompare(r.song));_.song_spec=W(o)}const V=ge(e,o=>o.singer);d=_,O=V,X=[...Object.keys(V).filter(o=>!!o).sort((o,s)=>o.localeCompare(s,"pinyin",{sensitivity:"accent"})),""]}},{immediate:!0,deep:!0});const q=$(window.innerWidth),{width:ne}=re(),Y=()=>{const e=document.getElementsByClassName("song-main")[0];e&&(q.value=e.offsetWidth)},D=e=>{oe&&(M(`点歌 ${e.song}`),me({message:`点歌 ${e.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},I=$("song");return Z(()=>ne.value,Y),_e(()=>{Y(),v.value=+getComputedStyle(document.documentElement).getPropertyValue("font-size").replace("px",""),p.value=p.value/16*v.value,T.value=T.value/16*v.value}),(e,t)=>{const c=de,F=ce,C=he,_=ue,V=pe,R=ye;return l(),i("div",ze,[u(c,{class:"slogan",style:m({"--slogan":`url(${e.slogan})`})},{default:g(()=>[k("div",{class:"logo",style:m({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},S(e.vup),5),k("div",null,[k("div",ke,S(e.logoCn),1),t[1]||(t[1]=k("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),u(Se,ee({name:e.avater.name||"",img:e.avater.img,src:e.avater.src||"",width:"4.375rem",height:"4.375rem",is:e.avater.is||"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},e.avater.$attr||{}),null,16,["name","img","src","is"])]),_:1},8,["style"]),e.tab?(l(),E(_,{key:0,modelValue:n(I),"onUpdate:modelValue":t[0]||(t[0]=o=>be(I)?I.value=o:null),class:"song-tabs"},{default:g(()=>[u(F,{label:"按歌名",name:"song"}),u(F,{label:"按歌手",name:"singer"},{default:g(()=>[(l(!0),i(y,null,z(n(X),o=>(l(),i(y,null,[n(O)[o]?(l(),i("div",Ee,[k("span",Be,S(o)+": ",1),(l(!0),i(y,null,z(n(O)[o].sort((s,r)=>s.song.localeCompare(r.song,"pinyin",{sensitivity:"accent"})),s=>(l(),E(C,{class:"song-item","disable-transitions":"",onClick:r=>D(s)},{default:g(()=>[A(S(s.song),1)]),_:2},1032,["onClick"]))),256))])):K("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue"])):(l(),i("div",Ne)),(l(),E(we,{to:e.tab?"#pane-song":"#default-song",defer:""},[(l(),i(y,null,z(5,o=>u(c,{class:"song-list"},{default:g(()=>[u(R,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:m({height:n(b)(J(n(d)[`song_${o}`],o)*n(p)/n(v))+"rem"})},{default:g(()=>[(l(!0),i(y,null,z(n(d)[`song_${o}`],(s,r)=>(l(),i("div",{class:"song-border",style:m({width:B(o)+"px",height:n(p)+"px"})},[u(V,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?w[s.tag].label:"",color:(s.tag&&w[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&w[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:g(()=>[u(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:h[P(r,n(d)[`song_${o}`],o)]||"#a2d3ff")+"11",onClick:le=>D(s),style:m({"border-left":`.3125rem ${(e.theme?e.theme:h[P(r,n(d)[`song_${o}`],o)]||"#a2d3ff")+"44"} solid`,color:e.theme?e.theme:h[P(r,n(d)[`song_${o}`],o)]||"#a2d3ff",fontSize:s.row==2?"0.53rem":"0.875rem"})},{default:g(()=>[A(S(s.song),1)]),_:2},1032,["color","onClick","style"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)),64)),(l(),i(y,null,z(["other","spec","eng"],o=>(l(),i(y,null,[n(d)[`song_${o}`]?(l(),E(c,{key:0,class:"song-list"},{default:g(()=>[u(R,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:m({height:Q(n(d)[`song_${o}`],f)*n(p)/n(v)+"rem"})},{default:g(()=>[(l(!0),i(y,null,z(n(d)[`song_${o}`],(s,r)=>(l(),i("div",{class:"song-border",style:m({width:B(f)+"px",height:n(p)+"px"})},[u(V,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?w[s.tag].label:"",color:(s.tag&&w[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&w[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:g(()=>[u(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:h[j(r,n(d)[`song_${o}`],f)]||"#a2d3ff")+"11",style:m({"border-left":`.3125rem ${(e.theme?e.theme:h[j(r,n(d)[`song_${o}`],f)]||"#a2d3ff")+"44"} solid`,"max-width":B(f)/n(v)+"rem",color:e.theme?e.theme:h[j(r,n(d)[`song_${o}`],f)]||"#a2d3ff",fontSize:s.row==2?"0.66rem":"0.875rem"}),onClick:le=>D(s)},{default:g(()=>[A(S(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)):K("",!0)],64))),64))],8,["to"]))])}}}),Me=Ce(Ve,[["__scopeId","data-v-4dc7c91e"]]);export{Me as _};
