import{u as oe,a as se}from"./index-CmUHC6fC.js";import{k as te,u as W,l as ne,j as le,m as ae,n as re,o as F,p as ie,q as ge,r as de,t as ce,v as ue,w as fe}from"./element-B5WS0eiH.js";import{h as Y,l as n,O as E,J as f,P as g,j as i,k,H as Z,Z as me,a as $,d as Q,c as pe,M as c,X as S,F as m,a5 as z,u as t,z as he,S as ye,$ as L,Q as X}from"./vue-DwVGnbwD.js";import{_ as ve}from"./plugin-vueexport-helper-DlAUqK2U.js";const _e=["xlink:href","fill"],be=Y({__name:"index",props:{width:{default:""},height:{default:""},color:{default:"#333"},prefix:{default:"#icon-"},is:{default:"el-icon"},name:{default:""},inStyle:{},img:{type:Boolean,default:!1},src:{default:"/kuromia.png"}},setup(R){return(a,U)=>{const M=te;return a.img?(n(),E(M,{key:0,style:f({width:a.width,height:a.height,...a.inStyle}),src:a.src,fit:"fill"},null,8,["style","src"])):(n(),E(me(a.is),{key:1},{default:g(()=>[(n(),i("svg",Z({xmlns:"http://www.w3.org/2000/svg",style:{width:a.width,height:a.height,...a.inStyle},"aria-hidden":"true"},a.$attrs),[k("use",{"xlink:href":a.prefix+a.name,fill:a.color},null,8,_e)],16))]),_:1}))}}}),we={class:"song-content"},Ce={class:"logo-cn"},$e={key:0,wrap:"",class:"singer-item"},Se={class:"singer"},ze={key:1,id:"default-song"},v=9,ke=Y({__name:"index",props:{vup:{},avater:{default:()=>({})},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"},songs:{default:()=>[]},theme:{default:""},tab:{type:Boolean,default:!0},specSongs:{default:()=>[]}},setup(R){const a=R,U=$("---"),{copy:M,isSupported:K}=oe({source:U}),p=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],h=$(16),_=$(36.09),A=$(16.09),N=e=>(32+14.53*ie([e<4?3.5:e,12]))/16*h.value,b=(e,l,u)=>(F((e+1)/P(l,u))-1)%p.length,P=(e=[],l)=>F(e.length/ge(H.value/N(l))),j=e=>{let l=e.length;const u=e.match(/[a-z]/g);return u&&(l=e.length-u.length+F(u.length/2)),l},w={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}};let d={},O={},G=[];const V=e=>e.map(l=>({...l,row:j(l.song)>v?2:1}));Q(()=>[a.songs,a.specSongs],([e,l],u)=>{if(e.length){const T=e.filter(o=>o.type.includes(1)),C=e.filter(o=>o.type.includes(0)),y={};y.song_other=V(W(C,"song").filter(o=>j(o.song)>5).sort((o,s)=>o.song.localeCompare(s.song,"pinyin"))),y.song_eng=V(W(T,"song").sort((o,s)=>o.song.localeCompare(s.song)));for(let o=1;o<=5;o++)y[`song_${o}`]=V(W(C,"song").filter(s=>j(s.song)===o).sort((s,r)=>s.song.localeCompare(r.song,"pinyin")));if(l.length){const o=W(l,"song").sort((s,r)=>s.song.localeCompare(r.song));y.song_spec=V(o)}const B=ne(e,o=>o.singer);d=y,O=B,G=[...Object.keys(B).filter(o=>!!o).sort((o,s)=>o.localeCompare(s,"pinyin",{sensitivity:"accent"})),""]}},{immediate:!0,deep:!0});const H=$(window.innerWidth),{width:x}=se(),J=()=>{const e=document.getElementsByClassName("song-main")[0];e&&(H.value=e.offsetWidth)},q=e=>{K&&(M(`点歌 ${e.song}`),de({message:`点歌 ${e.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},D=$("song");return Q(()=>x.value,J),pe(()=>{J(),h.value=+getComputedStyle(document.documentElement).getPropertyValue("font-size").replace("px",""),_.value=_.value/16*h.value,A.value=A.value/16*h.value}),(e,l)=>{const u=le,T=ae,C=ce,y=re,B=ue,I=fe;return n(),i("div",we,[c(u,{class:"slogan",style:f({"--slogan":`url(${e.slogan})`})},{default:g(()=>[k("div",{class:"logo",style:f({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},S(e.vup),5),k("div",null,[k("div",Ce,S(e.logoCn),1),l[1]||(l[1]=k("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),c(be,Z({name:e.avater.name||"",img:e.avater.img,src:e.avater.src||"",width:"4.375rem",height:"4.375rem",is:e.avater.is||"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},e.avater.$attr||{}),null,16,["name","img","src","is"])]),_:1},8,["style"]),e.tab?(n(),E(y,{key:0,modelValue:t(D),"onUpdate:modelValue":l[0]||(l[0]=o=>he(D)?D.value=o:null),class:"song-tabs"},{default:g(()=>[c(T,{label:"按歌名",name:"song"}),c(T,{label:"按歌手",name:"singer"},{default:g(()=>[(n(!0),i(m,null,z(t(G),o=>(n(),i(m,null,[t(O)[o]?(n(),i("div",$e,[k("span",Se,S(o)+": ",1),(n(!0),i(m,null,z(t(O)[o].sort((s,r)=>s.song.localeCompare(r.song,"pinyin",{sensitivity:"accent"})),s=>(n(),E(C,{class:"song-item","disable-transitions":"",onClick:r=>q(s)},{default:g(()=>[L(S(s.song),1)]),_:2},1032,["onClick"]))),256))])):X("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue"])):(n(),i("div",ze)),(n(),E(ye,{to:e.tab?"#pane-song":"#default-song",defer:""},[(n(),i(m,null,z(5,o=>c(u,{class:"song-list"},{default:g(()=>[c(I,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:f({height:t(F)(P(t(d)[`song_${o}`],o)*t(_)/t(h))+"rem"})},{default:g(()=>[(n(!0),i(m,null,z(t(d)[`song_${o}`],(s,r)=>(n(),i("div",{class:"song-border",style:f({width:N(o)+"px",height:t(_)+"px"})},[c(B,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?w[s.tag].label:"",color:(s.tag&&w[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&w[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:g(()=>[c(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:p[b(r,t(d)[`song_${o}`],o)]||"#a2d3ff")+"11",onClick:ee=>q(s),style:f({"border-left":`.3125rem ${(e.theme?e.theme:p[b(r,t(d)[`song_${o}`],o)]||"#a2d3ff")+"44"} solid`,color:e.theme?e.theme:p[b(r,t(d)[`song_${o}`],o)]||"#a2d3ff",fontSize:s.row==2?"0.53rem":"0.875rem"})},{default:g(()=>[L(S(s.song),1)]),_:2},1032,["color","onClick","style"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)),64)),(n(),i(m,null,z(["other","spec","eng"],o=>(n(),i(m,null,[t(d)[`song_${o}`]?(n(),E(u,{key:0,class:"song-list"},{default:g(()=>[c(I,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:f({height:P(t(d)[`song_${o}`],v)*t(_)/t(h)+"rem"})},{default:g(()=>[(n(!0),i(m,null,z(t(d)[`song_${o}`],(s,r)=>(n(),i("div",{class:"song-border",style:f({width:N(v)+"px",height:t(_)+"px"})},[c(B,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?w[s.tag].label:"",color:(s.tag&&w[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&w[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:g(()=>[c(C,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:p[b(r,t(d)[`song_${o}`],v)]||"#a2d3ff")+"11",style:f({"border-left":`.3125rem ${(e.theme?e.theme:p[b(r,t(d)[`song_${o}`],v)]||"#a2d3ff")+"44"} solid`,"max-width":N(v)/t(h)+"rem",color:e.theme?e.theme:p[b(r,t(d)[`song_${o}`],v)]||"#a2d3ff",fontSize:s.row==2?"0.66rem":"0.875rem"}),onClick:ee=>q(s)},{default:g(()=>[L(S(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)):X("",!0)],64))),64))],8,["to"]))])}}}),Te=ve(ke,[["__scopeId","data-v-3122426d"]]);export{Te as _};
