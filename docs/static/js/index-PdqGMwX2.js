import{u as te,a as ne}from"./index-Bjxi6ZIC.js";import{h as R,l,O as V,P as i,j as r,k as E,H as le,Z as ae,a as $,d as J,c as re,M as c,X as z,J as f,F as m,aa as S,u as t,z as ie,S as ge,$ as A,Q}from"./vue-DwQkaS4S.js";import{u as L,k as de,j as ce,l as ue,m as fe,n as k,o as me,p as D,q as pe,r as he,t as ye,v as _e}from"./element-Bnzt5eaQ.js";import{_ as ve}from"./plugin-vueexport-helper-DlAUqK2U.js";const be=["xlink:href","fill"],Ce=R({__name:"index",props:{width:{default:""},height:{default:""},color:{default:"#333"},prefix:{default:"#icon-"},is:{default:"el-icon"},name:{default:""},inStyle:{}},setup(U){return(d,Z)=>(l(),V(ae(d.is),null,{default:i(()=>[(l(),r("svg",le({xmlns:"http://www.w3.org/2000/svg",style:{width:d.width,height:d.height,...d.inStyle},"aria-hidden":"true"},d.$attrs),[E("use",{"xlink:href":d.prefix+d.name,fill:d.color},null,8,be)],16))]),_:1}))}}),we={class:"song-content"},$e={class:"logo-cn"},ze={key:0,wrap:"",class:"singer-item"},Se={class:"singer"},ke={key:1,id:"default-song"},p=9,Ee=R({__name:"index",props:{vup:{},avater:{default:""},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"},songs:{default:()=>[]},theme:{default:""},tab:{type:Boolean,default:!0},specSongs:{default:()=>[]}},setup(U){const d=U,Z=$("---"),{copy:X,isSupported:Y}=te({source:Z}),h=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],y=$(16),v=$(36.09),T=$(16.09),B=e=>(32+14.53*me([e<4?3.5:e,12]))/16*y.value,b=(e,n,u)=>(k((e+1)/K(n,u))-1)%h.length,G=(e=[],n)=>k(x(e)/D(P.value/B(n))),K=(e=[],n)=>k(ee(e)/D(P.value/B(n))),W=e=>{let n=e.length;const u=e.match(/[a-zA-Z]/g);return u&&(n=e.length-u.length+k(u.length/2)),n},x=e=>k(e.filter(n=>W(n.song)>p).length*T.value/v.value)+e.length,ee=e=>D(e.filter(n=>W(n.song)>p).length*T.value/v.value)+e.length,C={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}};let g={},M={},H=[];J(()=>[d.songs,d.specSongs],([e,n],u)=>{if(e.length){const F=e.filter(o=>o.type.includes(1)),w=e.filter(o=>o.type.includes(0)),_={};_.song_other=L(w,"song").filter(o=>W(o.song)>5).sort((o,s)=>o.song.localeCompare(s.song,"pinyin")),_.song_eng=L(F,"song").sort((o,s)=>o.song.localeCompare(s.song));for(let o=1;o<=5;o++)_[`song_${o}`]=L(w,"song").filter(s=>W(s.song)===o).sort((s,a)=>s.song.localeCompare(a.song,"pinyin"));if(n.length){const o=L(n,"song").sort((s,a)=>s.song.localeCompare(a.song));_.song_spec=o}const N=de(e,o=>o.singer);g=_,M=N,H=[...Object.keys(N).filter(o=>!!o).sort((o,s)=>o.localeCompare(s,"pinyin",{sensitivity:"accent"})),""]}},{immediate:!0,deep:!0});const P=$(window.innerWidth),{width:oe}=ne(),I=()=>{const e=document.getElementsByClassName("song-main")[0];e&&(P.value=e.offsetWidth)},j=e=>{Y&&(X(`点歌 ${e.song}`),pe({message:`点歌 ${e.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},O=$("song");return J(()=>oe.value,I),re(()=>{I(),y.value=+getComputedStyle(document.documentElement).getPropertyValue("font-size").replace("px",""),v.value=v.value/16*y.value,T.value=T.value/16*y.value}),(e,n)=>{const u=ce,F=ue,w=he,_=fe,N=ye,q=_e;return l(),r("div",we,[c(u,{class:"slogan",style:f({"--slogan":`url(${e.slogan})`})},{default:i(()=>[E("div",{class:"logo",style:f({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},z(e.vup),5),E("div",null,[E("div",$e,z(e.logoCn),1),n[1]||(n[1]=E("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),c(Ce,{name:e.avater,width:"4.375rem",height:"4.375rem",is:"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},null,8,["name"])]),_:1},8,["style"]),e.tab?(l(),V(_,{key:0,modelValue:t(O),"onUpdate:modelValue":n[0]||(n[0]=o=>ie(O)?O.value=o:null),class:"song-tabs"},{default:i(()=>[c(F,{label:"按歌名",name:"song"}),c(F,{label:"按歌手",name:"singer"},{default:i(()=>[(l(!0),r(m,null,S(t(H),o=>(l(),r(m,null,[t(M)[o]?(l(),r("div",ze,[E("span",Se,z(o)+": ",1),(l(!0),r(m,null,S(t(M)[o].sort((s,a)=>s.song.localeCompare(a.song,"pinyin",{sensitivity:"accent"})),s=>(l(),V(w,{class:"song-item","disable-transitions":"",onClick:a=>j(s)},{default:i(()=>[A(z(s.song),1)]),_:2},1032,["onClick"]))),256))])):Q("",!0)],64))),256))]),_:1})]),_:1},8,["modelValue"])):(l(),r("div",ke)),(l(),V(ge,{to:e.tab?"#pane-song":"#default-song",defer:""},[(l(),r(m,null,S(5,o=>c(u,{class:"song-list"},{default:i(()=>[c(q,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:f({height:t(k)(G(t(g)[`song_${o}`],o)*t(v)/t(y))+"rem"})},{default:i(()=>[(l(!0),r(m,null,S(t(g)[`song_${o}`],(s,a)=>(l(),r("div",{class:"song-border",style:f({width:B(o)+"px"})},[c(N,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?C[s.tag].label:"",color:(s.tag&&C[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&C[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(w,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:h[b(a,t(g)[`song_${o}`],o)]||"#a2d3ff")+"11",onClick:se=>j(s),style:f({"border-left":`.3125rem ${(e.theme?e.theme:h[b(a,t(g)[`song_${o}`],o)]||"#a2d3ff")+"44"} solid`,color:e.theme?e.theme:h[b(a,t(g)[`song_${o}`],o)]||"#a2d3ff"})},{default:i(()=>[A(z(s.song),1)]),_:2},1032,["color","onClick","style"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)),64)),(l(),r(m,null,S(["other","spec","eng"],o=>(l(),r(m,null,[t(g)[`song_${o}`]?(l(),V(u,{key:0,class:"song-list"},{default:i(()=>[c(q,{class:"song-main",wrap:"",alignment:"start",direction:"vertical",size:[0,0],style:f({height:G(t(g)[`song_${o}`],p)*t(v)/t(y)+"rem"})},{default:i(()=>[(l(!0),r(m,null,S(t(g)[`song_${o}`],(s,a)=>(l(),r("div",{class:"song-border",style:f({width:B(p)+"px"})},[c(N,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?C[s.tag].label:"",color:(s.tag&&C[s.tag].color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&C[s.tag].color||"#a2d3ff",fontSize:".5625rem",borderWidth:0},offset:[-16,5]},{default:i(()=>[c(w,{class:"song-item","disable-transitions":"",type:"info",color:(e.theme?e.theme:h[b(a,t(g)[`song_${o}`],p)]||"#a2d3ff")+"11",style:f({"border-left":`.3125rem ${(e.theme?e.theme:h[b(a,t(g)[`song_${o}`],p)]||"#a2d3ff")+"44"} solid`,"max-width":B(p)/t(y)+"rem",color:e.theme?e.theme:h[b(a,t(g)[`song_${o}`],p)]||"#a2d3ff"}),onClick:se=>j(s)},{default:i(()=>[A(z(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style"])],4))),256))]),_:2},1032,["style"])]),_:2},1024)):Q("",!0)],64))),64))],8,["to"]))])}}}),We=ve(Ee,[["__scopeId","data-v-aede6857"]]);export{We as _};
