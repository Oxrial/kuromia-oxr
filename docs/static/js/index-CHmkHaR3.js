import{_ as P}from"./index.vuevuetypescriptsetuptruelang-BkrCUJn8.js";import{p as j}from"./el-message-_NZvmBZy.js";import{u as U,a as D}from"./index-8XcpCeH0.js";import{k as $,l as G,m as L,n as H,o as J,j as K,r as R}from"./element-UiUITlrg.js";import{h as B,a as w,d as X,l,j as h,a5 as z,J as E,F as I,O as N,P as _,M as v,$ as Y,X as b,I as q,u as y,x as Q,k as p,H as Z}from"./vue-DwVGnbwD.js";import{_ as V}from"./plugin-vueexport-helper-DlAUqK2U.js";import{s as x,a as ee,b as oe}from"./index-CKgd8VGe.js";const W=r=>{let n=r.length;const a=r.match(/[a-z]/g);return a&&(n=r.length-a.length+$(a.length/2)),n},te=B({__name:"item",props:{songss:{default:()=>[]},theme:{default:""}},setup(r){const n=r,a={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}},c=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],g=w("---"),{copy:e,isSupported:o}=U({source:g}),u=t=>{o&&(e(`点歌 ${t.song}`),G({message:`点歌 ${t.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},f=w(),i=(t,T)=>{const k=L((T/2-30)/$(S.value*(.625+t.columns)-5)),C=L(t.list.length/k)+1;return t.list.forEach((d,m)=>{d.tag&&(d.tagE=a[d.tag]),d.color=$((m+1)/C-1)%c.length}),t};X(()=>n.songss,t=>{f.value=t},{immediate:!0,deep:!0});const S=w(parseInt(getComputedStyle(document.documentElement).fontSize)),{width:A}=D();return(t,T)=>{var d;const k=H,C=J;return l(!0),h(I,null,z((d=y(f))==null?void 0:d.map(m=>i(m,y(A))),m=>(l(),h("div",{class:"song-columns-container",style:E({columns:`${m.columns}rem auto`})},[(l(!0),h(I,null,z(m.list,s=>{var F,M,O;return l(),N(C,{hidden:!s.tag||s.tag&&s.tag!==3,value:s.tag?(F=s.tagE)==null?void 0:F.label:"",color:s.tag&&((M=s.tagE)==null?void 0:M.color)+"22"||"#a2d3ff","badge-style":{color:s.tag&&((O=s.tagE)==null?void 0:O.color)||"#a2d3ff",fontSize:".6rem",borderWidth:0,padding:".125rem .375rem"},offset:[-16,5],class:q(["song-item",{"long-text":y(W)(s.song)>=9}])},{default:_(()=>[v(k,{"disable-transitions":"",type:"info",color:(t.theme?t.theme:c[s.color]||"#a2d3ff")+"11",style:E({"border-left":`.3125rem ${(t.theme?t.theme:c[s.color]||"#a2d3ff")+"44"} solid`,color:t.theme?t.theme:c[s.color]||"#a2d3ff"}),onClick:ue=>u(s)},{default:_(()=>[Y(b(s.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style","class"])}),256))],4))),256)}}}),se=V(te,[["__scopeId","data-v-53004e1d"]]),ae={class:"main-container"},re={class:"logo-cn"},ne={class:"category-title"},le=B({__name:"index",props:{songs:{default:()=>[]},categories:{default:()=>({})},avater:{default:()=>({})},vup:{},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"}},setup(r){const n=r,a=Q(()=>n.songs.reduce((e,o)=>(o!=null&&o.category&&!e[o==null?void 0:o.category]&&(e[o==null?void 0:o.category]=[]),o!=null&&o.category?e[o==null?void 0:o.category].push(o):e.unknown.push(o),e),{unknown:[]})),c=e=>{const o=R(e,u=>W(u.song)<5);return[{columns:7,list:g(o),length:o.length},{columns:10,list:g(e),length:e.length}]},g=e=>e.sort((o,u)=>j(o.song,{toneType:"none"}).localeCompare(j(u.song,{toneType:"none"})));return(e,o)=>{const u=P,f=K;return l(),h("div",ae,[v(f,{class:"slogan",style:E({"--slogan":`url(${e.slogan})`})},{default:_(()=>[p("div",{class:"logo",style:E({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},b(e.vup),5),p("div",null,[p("div",re,b(e.logoCn),1),o[0]||(o[0]=p("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),v(u,Z({name:e.avater.name||"",img:e.avater.img,src:e.avater.src||"",width:"4.375rem",height:"4.375rem",is:e.avater.is||"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},e.avater.$attr||{}),null,16,["name","img","src","is"])]),_:1},8,["style"]),(l(!0),h(I,null,z(Object.keys(e.categories).sort((i,S)=>e.categories[S].order-e.categories[i].order),i=>(l(),N(f,{key:i,class:"category-card"},{header:_(()=>[p("div",ne,b(e.categories[i].label),1)]),default:_(()=>[v(se,{songss:c(y(a)[i])},null,8,["songss"])]),_:2},1024))),128))])}}}),ce=V(le,[["__scopeId","data-v-d04acbcb"]]),_e=B({__name:"index",setup(r){const n=[...x,...ee],a={unknown:{label:"未分类",order:0},pop:{label:"流行",order:1}};return(c,g)=>{const e=ce;return l(),N(e,{songs:n,categories:a,slogan:y(oe),avater:{is:"ElImage",img:!0},vup:"KUROMIA","logo-cn":"库洛米娅"},null,8,["slogan"])}}});export{_e as default};
