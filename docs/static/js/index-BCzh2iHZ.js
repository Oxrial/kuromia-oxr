import{_ as U}from"./index.vuevuetypescriptsetuptruelang-CF_AvRT1.js";import{p as j}from"./el-message-_NZvmBZy.js";import{u as D,a as G}from"./index-B8NBU2WD.js";import{k as $,l as H,m as L,n as J,o as K,j as R,r as X}from"./element-D5QrkvH2.js";import{h as B,a as w,d as Y,l as c,j as _,a5 as z,J as b,F as I,O as N,P as y,$ as V,X as g,M as v,I as q,u as E,x as Q,k as h,H as Z}from"./vue-CRh11K5_.js";import{_ as W}from"./plugin-vueexport-helper-DlAUqK2U.js";import{s as x,a as ee,b as oe}from"./index-B1N_C2P9.js";const A=r=>{let l=r.length;const s=r.match(/[a-z]/g);return s&&(l=r.length-s.length+$(s.length/2)),l},te=B({__name:"item",props:{songss:{default:()=>[]},theme:{default:""}},setup(r){const l=r,s={3:{label:"NEW",color:"#58c147"},1:{label:"SC",color:"#ff9a8b"},2:{label:"舰长",color:"#66bbf9"}},u=["#66bbf9","#d69dff","#ff9a8b","#d1ac3c","#58c147"],f=w("---"),{copy:e,isSupported:o}=D({source:f}),i=a=>{o&&(e(`点歌 ${a.song}`),H({message:`点歌 ${a.song}`,grouping:!0,type:"success",duration:5e3,plain:!0,offset:200,showClose:!0}))},p=w(),d=(a,T)=>{const k=L((T/2-30)/$(S.value*(.625+a.columns)-5)),C=L(a.list.length/k)+1;return a.list.forEach((n,m)=>{n.tag&&(n.tagE=s[n.tag]),n.color=$((m+1)/C-1)%u.length,n.len=A(n.song)}),a};Y(()=>l.songss,a=>{p.value=a},{immediate:!0,deep:!0});const S=w(parseInt(getComputedStyle(document.documentElement).fontSize)),{width:P}=G();return(a,T)=>{var n;const k=J,C=K;return c(!0),_(I,null,z((n=E(p))==null?void 0:n.map(m=>d(m,E(P))),m=>(c(),_("div",{class:"song-columns-container",style:b({columns:`${m.columns}rem auto`})},[(c(!0),_(I,null,z(m.list,t=>{var F,M,O;return c(),N(C,{hidden:!t.tag||t.tag&&t.tag!==3,value:t.tag?(F=t.tagE)==null?void 0:F.label:"",color:t.tag&&((M=t.tagE)==null?void 0:M.color)+"22"||"#a2d3ff","badge-style":{color:t.tag&&((O=t.tagE)==null?void 0:O.color)||"#a2d3ff",fontSize:".6rem",borderWidth:0,padding:".125rem .375rem"},offset:[-16,5],class:q(["song-item",{"long-text":t.len>9}])},{default:y(()=>[V(g(t.len)+"-"+g(t.len>9)+" ",1),v(k,{"disable-transitions":"",type:"info",color:(a.theme?a.theme:u[t.color]||"#a2d3ff")+"11",style:b({"border-left":`.3125rem ${(a.theme?a.theme:u[t.color]||"#a2d3ff")+"44"} solid`,color:a.theme?a.theme:u[t.color]||"#a2d3ff"}),onClick:ue=>i(t)},{default:y(()=>[V(g(t.song),1)]),_:2},1032,["color","style","onClick"])]),_:2},1032,["hidden","value","color","badge-style","class"])}),256))],4))),256)}}}),ae=W(te,[["__scopeId","data-v-cff41f90"]]),se={class:"main-container"},ne={class:"logo-cn"},re={class:"category-title"},le=B({__name:"index",props:{songs:{default:()=>[]},categories:{default:()=>({})},avater:{default:()=>({})},vup:{},slogan:{default:""},logo:{default:()=>({fontFamily:"BEYNO",fontSize:"2.7rem",height:"5rem"})},logoCn:{default:"---"}},setup(r){const l=r,s=Q(()=>l.songs.reduce((e,o)=>(o!=null&&o.category&&!e[o==null?void 0:o.category]&&(e[o==null?void 0:o.category]=[]),o!=null&&o.category?e[o==null?void 0:o.category].push(o):e.unknown.push(o),e),{unknown:[]})),u=e=>{const o=X(e,i=>A(i.song)<5);return[{columns:7,list:f(o),length:o.length},{columns:10,list:f(e),length:e.length}]},f=e=>e.sort((o,i)=>j(o.song,{toneType:"none"}).localeCompare(j(i.song,{toneType:"none"})));return(e,o)=>{const i=U,p=R;return c(),_("div",se,[v(p,{class:"slogan",style:b({"--slogan":`url(${e.slogan})`})},{default:y(()=>[h("div",{class:"logo",style:b({"font-family":e.logo.fontFamily,"font-size":e.logo.fontSize,height:e.logo.height})},g(e.vup),5),h("div",null,[h("div",ne,g(e.logoCn),1),o[0]||(o[0]=h("div",{style:{"text-align":"right","font-size":"0.875rem","text-shadow":"0.0625rem 0.0625rem 0.125rem black",color:"white"}}," 注：若页面异常请看图片版本 ",-1))]),v(i,Z({name:e.avater.name||"",img:e.avater.img,src:e.avater.src||"",width:"4.375rem",height:"4.375rem",is:e.avater.is||"v-fragment","in-style":{top:"5.5rem",position:"absolute","border-radius":".9375rem"}},e.avater.$attr||{}),null,16,["name","img","src","is"])]),_:1},8,["style"]),(c(!0),_(I,null,z(Object.keys(e.categories).sort((d,S)=>e.categories[S].order-e.categories[d].order),d=>(c(),N(p,{key:d,class:"category-card"},{header:y(()=>[h("div",re,g(e.categories[d].label),1)]),default:y(()=>[v(ae,{songss:u(E(s)[d])},null,8,["songss"])]),_:2},1024))),128))])}}}),ce=W(le,[["__scopeId","data-v-d04acbcb"]]),_e=B({__name:"index",setup(r){const l=[...x,...ee],s={unknown:{label:"未分类",order:0},pop:{label:"流行",order:1}};return(u,f)=>{const e=ce;return c(),N(e,{songs:l,categories:s,slogan:E(oe),avater:{is:"ElImage",img:!0},vup:"KUROMIA","logo-cn":"库洛米娅"},null,8,["slogan"])}}});export{_e as default};
